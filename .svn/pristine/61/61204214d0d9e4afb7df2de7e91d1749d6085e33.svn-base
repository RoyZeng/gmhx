<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.gome.gmhx.dao.basicdata.BrandDao">
	<resultMap id="BaseResultMap" type="com.gome.gmhx.entity.Brand">
	    <result property="id" column="id" jdbcType="VARCHAR"/>
		<result property="gm_code" column="gm_code" jdbcType="VARCHAR"/>
		<result property="brand" column="brand" jdbcType="VARCHAR"/>
		<result property="note" column="note" jdbcType="VARCHAR"/>
		<result property="rep_date" column="rep_date" jdbcType="TIMESTAMP"/>
		<result property="creater" column="creater" jdbcType="VARCHAR"/>
		<result property="modifier" column="modifier" jdbcType="VARCHAR"/>
		<result property="mod_date" column="mod_date" jdbcType="TIMESTAMP"/>
		<result property="isUse" column="is_use" jdbcType="CHAR"/>
</resultMap>
  
  
 <select id="getBrandPageList" parameterType="com.gome.common.page.Page" resultType="hashmap">
           select t.id, t.rep_date as repDate, t.mod_date as modDate, t.brand brand, t.is_use as isUse
			from hx_brand_information t
			where 1=1 
		<if test="param.brand != null and param.brand != '' ">
		   and brand like '%${param.brand}%' 
		</if>
		<if test="param.isUse!= null and param.isUse != '' ">
		   and is_use = #{param.isUse,jdbcType=CHAR}
		</if>
	<if test="param.mod_date_st !=null and param.mod_date_st != '' ">
		   <![CDATA[ and mod_date >=#{param.mod_date_st} ]]>   </if>      
	<if test="param.mod_date_end !=null and param.mod_date_end != '' ">
		   <![CDATA[ and mod_date <=#{param.mod_date_end} ]]>   </if>    
  </select>
  
  <select id="getBrandById" resultMap="BaseResultMap" parameterType="java.lang.String" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 14 17:17:26 CST 2014.
    -->
     select id,note , gm_code, brand,is_use
			from hx_brand_information
			where id= #{id,jdbcType=VARCHAR}
  </select>
 
 <!-- 显示界面查询 -->
  <select id="getShowById" resultMap="BaseResultMap" parameterType="java.lang.String" >
     select * from hx_brand_information
			where id= #{id,jdbcType=VARCHAR}
  </select>
  
 <!-- 导出查询 -->	
<select id="getBrandExport" parameterType="com.gome.gmhx.entity.Brand" resultType="hashmap">
     select t.id,t.note , t.mod_date , t.gm_code, t.brand, v1.code_value gm_code2, v2.code_value brand2 ,t.rep_date
			from hx_brand_information t
			LEFT JOIN v_code v1
			on v1.code_id='gmdm' and v1.code_key=t.gm_code
			LEFT JOIN v_code v2
			on v2.code_id='pp' and v2.code_key=t.brand
			where gm_code in('01','02','03','04','05','06','07','08','09')
	<!--  SELECT * FROM hx_brandinformation where 1=1 -->  
	     <if test="gm_code !=null">
	         and gm_code like CONCAT('%',#{gm_code},'%')
	     </if>
		<if test="brand != null">
		   and brand like CONCAT('%',#{brand},'%')
		</if>
		<if test="note != null">
		   and note like CONCAT('%',#{note},'%')
		</if>
		<if test="mod_date !=null"> 
		    and mod_date like CONCAT('%',#{mod_date},'%')
		</if>
   </select>
 
  <insert id="addBrand" parameterType="com.gome.gmhx.entity.Brand" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 14 17:17:26 CST 2014.
    -->
    insert into hx_brand_information (id,gm_code, brand, note,rep_date,is_use)
    values (#{id,jdbcType=VARCHAR} ,#{gm_code,jdbcType=VARCHAR}, #{brand,jdbcType=VARCHAR}, #{note,jdbcType=VARCHAR},#{rep_date,jdbcType=TIMESTAMP},#{isUse,jdbcType=CHAR})
  </insert>
  
  <sql id="Base_Column_List">
  gm_code,brand,note,rep_date,creater,id
  </sql>


<insert id="insertBrandBatch" parameterType="java.util.List">
  INSERT INTO hx_brand_information (
    <include refid="Base_Column_List" />
    )
    VALUES
    <foreach collection="list" item="item" separator=",">
     (#{item.gm_code,jdbcType=VARCHAR},#{item.brand,jdbcType=VARCHAR},#{item.note,jdbcType=VARCHAR},#{item.rep_date,jdbcType=TIMESTAMP},#{item.creater,jdbcType=VARCHAR},
     #{item.id,jdbcType=VARCHAR},#{item.isUse,jdbcType=CHAR})
    </foreach>
  </insert>
  
  <update id="updateBrand" parameterType="com.gome.gmhx.entity.Brand" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 14 17:17:26 CST 2014.
    -->
    update hx_brand_information 
   		set brand = #{brand,jdbcType=VARCHAR},
        mod_date = #{mod_date,jdbcType=TIMESTAMP}
    where  id= #{id,jdbcType=VARCHAR}
  </update>
  
  <select id="getAllBrand" resultType="hashmap">
 	 select id,brand from hx_brand_information
  </select>
  
  <update id="setIsUse" parameterType="com.gome.gmhx.entity.Brand" >
    update hx_brand_information 
    set mod_date = #{mod_date,jdbcType=TIMESTAMP},
        is_use = #{isUse,jdbcType=TIMESTAMP}
    where  id= #{id,jdbcType=VARCHAR}
  </update>
 
</mapper>