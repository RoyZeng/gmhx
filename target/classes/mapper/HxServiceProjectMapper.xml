<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.gome.gmhx.dao.servicemanage.HxServiceProjectDao" >
  <resultMap id="BaseResultMap" type="com.gome.gmhx.entity.HxServiceProject" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Sep 02 10:49:09 CST 2014.
    -->
    <result column="service_id" property="serviceId" jdbcType="VARCHAR" />
    <result column="machine_type" property="machineType" jdbcType="VARCHAR" />
    <result column="internal_machine_code1" property="internalMachineCode1" jdbcType="VARCHAR" />
    <result column="internal_machine_code2" property="internalMachineCode2" jdbcType="VARCHAR" />
    <result column="external_machine_code" property="externalMachineCode" jdbcType="VARCHAR" />
    <result column="install_card_num" property="installCardNum" jdbcType="DECIMAL" />
    <result column="install_date" property="installDate" jdbcType="TIMESTAMP" />
    <result column="installer" property="installer" jdbcType="VARCHAR" />
    <result column="is_double_install" property="isDoubleInstall" jdbcType="VARCHAR" />
    <result column="warranty_policy" property="warrantyPolicy" jdbcType="VARCHAR" />
    <result column="delay_fee" property="delayFee" jdbcType="DECIMAL" />
    <result column="other_fee" property="otherFee" jdbcType="DECIMAL" />
    <result column="comment_p" property="commentP" jdbcType="VARCHAR" />
  </resultMap>
  <sql id="Example_Where_Clause" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Sep 02 10:49:09 CST 2014.
    -->
    <where >
      <foreach collection="oredCriteria" item="criteria" separator="or" >
        <if test="criteria.valid" >
          <trim prefix="(" suffix=")" prefixOverrides="and" >
            <foreach collection="criteria.criteria" item="criterion" >
              <choose >
                <when test="criterion.noValue" >
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue" >
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue" >
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue" >
                  and ${criterion.condition}
                  <foreach collection="criterion.value" item="listItem" open="(" close=")" separator="," >
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Update_By_Example_Where_Clause" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Sep 02 10:49:09 CST 2014.
    -->
    <where >
      <foreach collection="example.oredCriteria" item="criteria" separator="or" >
        <if test="criteria.valid" >
          <trim prefix="(" suffix=")" prefixOverrides="and" >
            <foreach collection="criteria.criteria" item="criterion" >
              <choose >
                <when test="criterion.noValue" >
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue" >
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue" >
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue" >
                  and ${criterion.condition}
                  <foreach collection="criterion.value" item="listItem" open="(" close=")" separator="," >
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Sep 02 10:49:09 CST 2014.
    -->
    service_id, machine_type, internal_machine_code1, internal_machine_code2, external_machine_code, 
    install_card_num, install_date, installer, is_double_install, warranty_policy, delay_fee, 
    other_fee, comment_p
  </sql>
  <insert id="insert" parameterType="com.gome.gmhx.entity.HxServiceProject" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Sep 02 10:49:09 CST 2014.
    -->
    insert into hx_service_project (service_id, machine_type, internal_machine_code1, 
      internal_machine_code2, external_machine_code, 
      install_card_num, install_date, installer, 
      is_double_install, warranty_policy, delay_fee, 
      other_fee, comment_p)
    values (#{serviceId,jdbcType=VARCHAR}, #{machineType,jdbcType=VARCHAR}, #{internalMachineCode1,jdbcType=VARCHAR}, 
      #{internalMachineCode2,jdbcType=VARCHAR}, #{externalMachineCode,jdbcType=VARCHAR}, 
      #{installCardNum,jdbcType=DECIMAL}, #{installDate,jdbcType=TIMESTAMP}, #{installer,jdbcType=VARCHAR}, 
      #{isDoubleInstall,jdbcType=VARCHAR}, #{warrantyPolicy,jdbcType=VARCHAR}, #{delayFee,jdbcType=DECIMAL}, 
      #{otherFee,jdbcType=DECIMAL}, #{commentP,jdbcType=VARCHAR})
  </insert>
  <insert id="insertSelective" parameterType="com.gome.gmhx.entity.HxServiceProject" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Sep 02 10:49:09 CST 2014.
    -->
    insert into hx_service_project
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="serviceId != null" >
        service_id,
      </if>
      <if test="machineType != null" >
        machine_type,
      </if>
      <if test="internalMachineCode1 != null" >
        internal_machine_code1,
      </if>
      <if test="internalMachineCode2 != null" >
        internal_machine_code2,
      </if>
      <if test="externalMachineCode != null" >
        external_machine_code,
      </if>
      <if test="installCardNum != null" >
        install_card_num,
      </if>
      <if test="installDate != null" >
        install_date,
      </if>
      <if test="installer != null" >
        installer,
      </if>
      <if test="isDoubleInstall != null" >
        is_double_install,
      </if>
      <if test="warrantyPolicy != null" >
        warranty_policy,
      </if>
      <if test="delayFee != null" >
        delay_fee,
      </if>
      <if test="otherFee != null" >
        other_fee,
      </if>
      <if test="commentP != null" >
        comment_p,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="serviceId != null" >
        #{serviceId,jdbcType=VARCHAR},
      </if>
      <if test="machineType != null" >
        #{machineType,jdbcType=VARCHAR},
      </if>
      <if test="internalMachineCode1 != null" >
        #{internalMachineCode1,jdbcType=VARCHAR},
      </if>
      <if test="internalMachineCode2 != null" >
        #{internalMachineCode2,jdbcType=VARCHAR},
      </if>
      <if test="externalMachineCode != null" >
        #{externalMachineCode,jdbcType=VARCHAR},
      </if>
      <if test="installCardNum != null" >
        #{installCardNum,jdbcType=DECIMAL},
      </if>
      <if test="installDate != null" >
        #{installDate,jdbcType=TIMESTAMP},
      </if>
      <if test="installer != null" >
        #{installer,jdbcType=VARCHAR},
      </if>
      <if test="isDoubleInstall != null" >
        #{isDoubleInstall,jdbcType=VARCHAR},
      </if>
      <if test="warrantyPolicy != null" >
        #{warrantyPolicy,jdbcType=VARCHAR},
      </if>
      <if test="delayFee != null" >
        #{delayFee,jdbcType=DECIMAL},
      </if>
      <if test="otherFee != null" >
        #{otherFee,jdbcType=DECIMAL},
      </if>
      <if test="commentP != null" >
        #{commentP,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <insert id="insertProjects" parameterType="hashmap">
    insert into hx_service_project (service_id, machine_type, internal_machine_code1, internal_machine_code2, external_machine_code, 
    install_card_num, install_date, installer, is_double_install, warranty_policy, delay_fee, 
    other_fee, comment_p) values 
    <foreach collection="list" item="item" separator="," >
    	(#{serviceId},#{item.machineType},#{item.internalMachineCode1},#{item.internalMachineCode2},#{item.externalMachineCode},
    	#{item.installCardNum},#{item.installDate},#{item.installer},#{item.isDoubleInstall},#{item.warrantyPolicy},#{item.delayFee},
    	#{item.otherFee},#{item.commentP})
    </foreach>
  </insert>
  <select id="selectProjects" resultType="hashmap" parameterType="java.lang.String">
	SELECT 	
	T.service_id serviceId, P.machine_type machineType, P.internal_machine_code1 internalMachineCode1, 
	P.internal_machine_code2 internalMachineCode2, P.external_machine_code externalMachineCode, 
	P.install_card_num installCardNum, P.install_date installDate, T.service_man installer, T.is_double_install isDoubleInstall, 
	T.warranty_policy warrantyPolicy, T.delay_fee delayFee, T.other_fee otherFee, P.product_note commentP 
	FROM hx_service_customer C
	LEFT JOIN hx_service_ticket T ON T.customer_id = C.customer_id
	LEFT JOIN hx_service_product P ON P.customer_id = C.customer_id
	WHERE C.customer_id = (SELECT customer_id FROM hx_service_ticket WHERE service_id = #{serviceId,jdbcType=VARCHAR})
	GROUP BY T.service_id
  </select>
  <delete id="deleteProjects" parameterType="java.lang.String">
  	DELETE from hx_service_project
  	WHERE service_id = #{serviceId,jdbcType=VARCHAR}
  </delete>
  <update id="updateByExampleSelective" parameterType="map" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Sep 02 10:49:09 CST 2014.
    -->
    update hx_service_project
    <set >
      <if test="record.serviceId != null" >
        service_id = #{record.serviceId,jdbcType=VARCHAR},
      </if>
      <if test="record.machineType != null" >
        machine_type = #{record.machineType,jdbcType=VARCHAR},
      </if>
      <if test="record.internalMachineCode1 != null" >
        internal_machine_code1 = #{record.internalMachineCode1,jdbcType=VARCHAR},
      </if>
      <if test="record.internalMachineCode2 != null" >
        internal_machine_code2 = #{record.internalMachineCode2,jdbcType=VARCHAR},
      </if>
      <if test="record.externalMachineCode != null" >
        external_machine_code = #{record.externalMachineCode,jdbcType=VARCHAR},
      </if>
      <if test="record.installCardNum != null" >
        install_card_num = #{record.installCardNum,jdbcType=DECIMAL},
      </if>
      <if test="record.installDate != null" >
        install_date = #{record.installDate,jdbcType=TIMESTAMP},
      </if>
      <if test="record.installer != null" >
        installer = #{record.installer,jdbcType=VARCHAR},
      </if>
      <if test="record.isDoubleInstall != null" >
        is_double_install = #{record.isDoubleInstall,jdbcType=VARCHAR},
      </if>
      <if test="record.warrantyPolicy != null" >
        warranty_policy = #{record.warrantyPolicy,jdbcType=VARCHAR},
      </if>
      <if test="record.delayFee != null" >
        delay_fee = #{record.delayFee,jdbcType=DECIMAL},
      </if>
      <if test="record.otherFee != null" >
        other_fee = #{record.otherFee,jdbcType=DECIMAL},
      </if>
      <if test="record.commentP != null" >
        comment_p = #{record.commentP,jdbcType=VARCHAR},
      </if>
    </set>
    <if test="_parameter != null" >
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByExample" parameterType="map" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Sep 02 10:49:09 CST 2014.
    -->
    update hx_service_project
    set service_id = #{record.serviceId,jdbcType=VARCHAR},
      machine_type = #{record.machineType,jdbcType=VARCHAR},
      internal_machine_code1 = #{record.internalMachineCode1,jdbcType=VARCHAR},
      internal_machine_code2 = #{record.internalMachineCode2,jdbcType=VARCHAR},
      external_machine_code = #{record.externalMachineCode,jdbcType=VARCHAR},
      install_card_num = #{record.installCardNum,jdbcType=DECIMAL},
      install_date = #{record.installDate,jdbcType=TIMESTAMP},
      installer = #{record.installer,jdbcType=VARCHAR},
      is_double_install = #{record.isDoubleInstall,jdbcType=VARCHAR},
      warranty_policy = #{record.warrantyPolicy,jdbcType=VARCHAR},
      delay_fee = #{record.delayFee,jdbcType=DECIMAL},
      other_fee = #{record.otherFee,jdbcType=DECIMAL},
      comment_p = #{record.commentP,jdbcType=VARCHAR}
    <if test="_parameter != null" >
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <sql id="MySqlDialectPage" >
    <if test="page != null" >
      <![CDATA[ limit  #{page.begin} , #{page.end} ]]>
    </if>
  </sql>
</mapper>